# Linux iwspy(8) completion
#

comp_include _available_interfaces

_iwspy()
{
    local cur

    COMPREPLY=()
    cur=`_get_cword`

    if [ $COMP_CWORD -eq 1 ]; then
        if [[ "$cur" == -* ]]; then
            COMPREPLY=( $( compgen -W '--help --version' -- $cur ) ) 
        else
            _available_interfaces -w
        fi
    else
        COMPREPLY=( $( compgen -W 'setthr getthr off' -- $cur ) ) 
    fi
}

comp_install  # Make completion persistent for subsequent invocations

_add_members  # Generate completions for first invocation
